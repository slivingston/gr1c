<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>gr1c: File formats</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="gr1cdoc.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">gr1c
   &#160;<span id="projectnumber">0.13.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">File formats </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The purpose of this page is to describe the file formats supported by gr1c, besides the <a href="md_spc_format.html">format of input specifications</a>. The command-line argument "-t" is used to specify the format in which to output the synthesized strategy. A key to the choices, including functions that provide it, is:</p>
<ul>
<li><code>txt</code> : simple plaintext format (not standard); list_aut_dump()</li>
<li><code>dot</code> : <a href="https://www.graphviz.org/">Graphviz dot</a>; dot_aut_dump()</li>
<li><code>aut</code> : <a href="#gr1cautformat">gr1c automaton format</a>; aut_aut_dump()</li>
<li><code>json</code> : <a href="#gr1cjson">strategy in JSON</a>; json_aut_dump()</li>
<li><code>tulip</code> : <a href="#tulipconxml">tulipcon XML</a>; tulip_aut_dump()</li>
</ul>
<p>Several of the patching routines need to be given a description of changes to the game edge set. This is achieved using the <a href="#edgechangeset">edge changes file format</a>. The relevant command-line argument is "-e FILE".</p>
<h2 id="gr1cjson">strategy in JSON</h2>
<p>The gross file formatting is <a href="https://json.org/">JSON</a>. The details of what gr1c provides are versioned. The current version is 1. The only difference with version 0 is the addition of the node field "initial". A key to entries is:</p>
<ul>
<li><code>version</code> : format version number</li>
<li><code>gr1c</code> : version of gr1c that generated the output</li>
<li><code>date</code> : timestamp in UTC; e.g., invocation time of json_aut_dump()</li>
<li><code>extra</code> : an arbitrary, printable string</li>
<li><code>ENV</code>, <code>SYS</code> : ordered lists of environment and system variables, respectively, including domains. Possible domains are the same as accepted in the <a href="md_spc_format.html">specification input</a>:<ul>
<li><code>"boolean"</code> : 1 (<code>True</code>) or 0 (<code>False</code>). Note that JSON includes <code>true</code> and <code>false</code> values, but we do not use them here.</li>
<li><code>[0,n]</code> : integers <code>0, 1, ..., n</code>, where <code>n</code> is a nonnegative integer.</li>
</ul>
</li>
<li><code>nodes</code> : object of automaton nodes, each of which is uniquely named and has as value an object organized by the various members of anode_t (cf. automaton.h). Released changes to the members of anode_t will cause this format version number to increment.</li>
</ul>
<p>Note that the notion of "object" in JSON maps to <code>dict</code> (i.e., "dictionary
objects") in Python. An example is the following. </p><pre class="fragment">{"version": 1,
 "gr1c": "0.8.4",
 "date": "2014-09-19 18:06:49",
 "extra": "",

 "ENV": [{"x": "boolean"}],
 "SYS": [{"y": "boolean"}],

 "nodes": {
"0x101090": {
    "state": [0, 0],
    "mode": 0,
    "rgrad": 1,
    "initial": false,
    "trans": ["0x101040"] },
"0x101040": {
    "state": [1, 1],
    "mode": 1,
    "rgrad": 1,
    "initial": false,
    "trans": ["0x101090"] },
"0x101010": {
    "state": [0, 1],
    "mode": 0,
    "rgrad": 1,
    "initial": true,
    "trans": ["0x101040"] }
}}
</pre><h2 id="tulipconxml">tulipcon XML</h2>
<p>A file format from before version 1 of <a href="http://tulip-control.org">TuLiP</a>. At the time of writing, it is not yet available in the current release of TuLiP.</p>
<h2 id="gr1cautformat">gr1c automaton</h2>
<p>This format is occasionally referred to as "gr1c aut format". The relevant command-line argument is "-a FILE". Note that version numbers of this format are independent (for most practical purposes) from the version of gr1c itself. For all versions, the version number is given as a single nonnegative integer on the first non-comment, non-blank line. In the case of a missing version number, <a href="#gr1cautformatv0">0 is assumed</a> (also known as the <a href="#gr1cautformatv0">legacy format</a>). Unless explicitly stated to the contrary in the format version description below, blank lines and lines beginning with <code>#</code> (known as "comments") are always ignored.</p>
<p>For this format, the API includes functions aut_aut_load() and aut_aut_dump() for reading and writing, respectively. Signatures are in automaton.h.</p>
<h3 id="gr1cautformatv1">version 1</h3>
<p>Each line is of the form </p><pre class="fragment">i S I m r t0 t1 ...
</pre><p>where <code>I</code> is <code>1</code> if the node is initial and <code>0</code> otherwise, corresponding respectively to <code>True</code> and <code>False</code> of the <code>initial</code> field of the anode_t structure (defined in automaton.h). There is a <a href="md_spc_format.html#initconditions">brief introduction to interpretations of initial conditions</a> in the documentation of the specification input format. The other elements are as in the <a href="#gr1cautformatv0">aut format v0</a>.</p>
<h3 id="gr1cautformatv0">version 0 (legacy)</h3>
<p>The order of the state vector matches that from the specification (as in most other places in the source code). Each line is of the form </p><pre class="fragment">i S m r t0 t1 ...
</pre><p>where <code>i</code> is the node ID, <code>S</code> is a space-separated list of values taken by variables at this node (i.e., its state label), <code>m</code> the goal mode, <code>r</code> is a reach annotation value (-1 if not available), and all remaining integers are IDs of nodes in the outgoing transition set of this node.</p>
<p>The list of IDs is assumed to be tight, meaning if there are N nodes, then the file must contain indices 0 through N-1 (not necessarily in order).</p>
<h2 id="edgechangeset">game edge set changes</h2>
<p>Files of this form consist of two parts: first a list (one per line) of states considered to be in the neighborhood; and second a sequence of <b>restrict</b>, <b>relax</b>, or <b>blocksys</b> commands (as defined in the section <a href="md_interaction.html">Interaction</a>). Blank lines and lines beginning with <code>#</code> are ignored.</p>
<p>For example, if there are two variables, and we have declared the "neighborhood" to consist of states 00, 01, and 11 (with states given as bitvectors), and we wish to change the game graph by removing the controlled edge from 00 to 01, then the file would be </p><pre class="fragment"># This is a comment.
0 0
0 1
1 1
restrict 0 0 0 1
</pre><p>If patching was successful, then the new strategy is output to stdout (in the format specified by the flag "-t" if given; else, the default). Otherwise, a nonzero integer is returned by the program. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
